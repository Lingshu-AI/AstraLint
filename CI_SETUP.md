# ğŸš€ CI/CD Setup Guide

æœ¬æ–‡æ¡£æè¿°äº†ä¸º AstraLint é¡¹ç›®è®¾ç½®çš„ GitHub Actions CI/CD æµç¨‹ã€‚

## ğŸ“‹ æ¦‚è¿°

åŸºäºå‚è€ƒé¡¹ç›® `lang-memory` çš„é…ç½®ï¼Œæˆ‘ä»¬ä¸º AstraLint é¡¹ç›®æ·»åŠ äº†å®Œæ•´çš„ CI/CD ç®¡é“ï¼ŒåŒ…æ‹¬ï¼š

### ğŸ› ï¸ CI æµç¨‹

1. **æ„å»ºå’Œæµ‹è¯•** (`build-and-test.yml`)

   - Java 17 ç¯å¢ƒè®¾ç½®
   - Maven ä¾èµ–ç¼“å­˜
   - å•å…ƒæµ‹è¯•æ‰§è¡Œ
   - åº”ç”¨ç¨‹åºæ„å»º
   - Docker é•œåƒæ„å»º

2. **ä»£ç è´¨é‡æ£€æŸ¥** (`code-quality.yml`)

   - **Checkstyle**: ä»£ç é£æ ¼æ£€æŸ¥ï¼ˆä½¿ç”¨ Google Java Styleï¼‰

3. **å®‰å…¨æ£€æŸ¥** (`security.yml`)
   - **CodeQL**: GitHub çš„è¯­ä¹‰ä»£ç åˆ†æ
   - å®šæœŸå®‰å…¨æ‰«æï¼ˆæ¯å‘¨ä¸€æ¬¡ï¼‰

## ğŸ”§ é…ç½®æ–‡ä»¶

### GitHub Actions å·¥ä½œæµ

```
.github/
â”œâ”€â”€ workflows/
â”‚   â”œâ”€â”€ build-and-test.yml     # æ„å»ºå’Œæµ‹è¯•
â”‚   â”œâ”€â”€ code-quality.yml       # ä»£ç è´¨é‡æ£€æŸ¥
â”‚   â””â”€â”€ security.yml           # å®‰å…¨æ£€æŸ¥
â”œâ”€â”€ dependabot.yml             # ä¾èµ–æ›´æ–°è‡ªåŠ¨åŒ–
â”œâ”€â”€ PULL_REQUEST_TEMPLATE.md   # PRæ¨¡æ¿
â””â”€â”€ ISSUE_TEMPLATE/            # Issueæ¨¡æ¿
    â”œâ”€â”€ bug_report.yml
    â””â”€â”€ feature_request.yml
```

### å·¥å…·é…ç½®

```
tools/
â””â”€â”€ github-actions/
    â””â”€â”€ setup-deps/
        â””â”€â”€ action.yml          # ç¯å¢ƒä¾èµ–è®¾ç½®
```

### Maven é…ç½®

`pom.xml` å·²æ›´æ–°ï¼ŒåŒ…å«ä»¥ä¸‹æ’ä»¶ï¼š

- `maven-checkstyle-plugin`: ä»£ç é£æ ¼æ£€æŸ¥
- `jacoco-maven-plugin`: ä»£ç è¦†ç›–ç‡

## ğŸ“ æœ¬åœ°å¼€å‘

### å¿«é€Ÿå¼€å§‹

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make help

# å®Œæ•´æ„å»ºæµç¨‹
make build

# è¿è¡Œä»£ç è´¨é‡æ£€æŸ¥
make quality



# æ„å»ºDockeré•œåƒ
make docker-build
```

### ä¸»è¦ Makefile ç›®æ ‡

| å‘½ä»¤                  | æè¿°             |
| --------------------- | ---------------- |
| `make clean`          | æ¸…ç†æ„å»ºäº§ç‰©     |
| `make compile`        | ç¼–è¯‘é¡¹ç›®         |
| `make test`           | è¿è¡Œæµ‹è¯•         |
| `make package`        | æ‰“åŒ…åº”ç”¨ç¨‹åº     |
| `make build`          | å®Œæ•´æ„å»ºæµç¨‹     |
| `make quality`        | ä»£ç è´¨é‡æ£€æŸ¥     |
| `make security-check` | å®‰å…¨æ‰«æ         |
| `make docker-build`   | æ„å»º Docker é•œåƒ |
| `make ci-full`        | å®Œæ•´ CI æµç¨‹     |

## ğŸ”’ å®‰å…¨æ€§

### ä¾èµ–ç®¡ç†

- **Dependabot**: è‡ªåŠ¨åˆ›å»ºä¾èµ–æ›´æ–° PR
- **OWASP Dependency Check**: æ‰«æå·²çŸ¥æ¼æ´
- **CodeQL**: è¯­ä¹‰ä»£ç åˆ†æ

### é…ç½®æ–‡ä»¶

- `owasp-dependency-check-suppressions.xml`: OWASP æ‰«ææŠ‘åˆ¶é…ç½®

## ğŸš€ éƒ¨ç½²

### ç¯å¢ƒé…ç½®

é¡¹ç›®æ”¯æŒä¸¤ä¸ªéƒ¨ç½²ç¯å¢ƒï¼š

1. **Staging**:

   - è§¦å‘ï¼šæ¨é€åˆ° `main` åˆ†æ”¯
   - é•œåƒæ ‡ç­¾ï¼š`staging`

2. **Production**:
   - è§¦å‘ï¼šæ¨é€ç‰ˆæœ¬æ ‡ç­¾ (å¦‚ `v1.0.0`)
   - é•œåƒæ ‡ç­¾ï¼šç‰ˆæœ¬å· + `latest`

### æ‰‹åŠ¨éƒ¨ç½²

å¯ä»¥é€šè¿‡ GitHub Actions ç•Œé¢æ‰‹åŠ¨è§¦å‘éƒ¨ç½²ï¼š

1. è®¿é—®é¡¹ç›®çš„ Actions é¡µé¢
2. é€‰æ‹©"ğŸš€ Deploy"å·¥ä½œæµ
3. ç‚¹å‡»"Run workflow"
4. é€‰æ‹©ç›®æ ‡ç¯å¢ƒ

## ğŸ“Š æŠ¥å‘Šå’Œç›‘æ§

CI/CD æµç¨‹ä¼šç”Ÿæˆä»¥ä¸‹æŠ¥å‘Šï¼š

- æµ‹è¯•ç»“æœ
- ä»£ç è¦†ç›–ç‡æŠ¥å‘Š
- ä»£ç è´¨é‡åˆ†ææŠ¥å‘Š
- å®‰å…¨æ‰«ææŠ¥å‘Š

æ‰€æœ‰æŠ¥å‘Šéƒ½ä¼šä½œä¸º GitHub Actions çš„ artifacts ä¸Šä¼ ã€‚

## ğŸ¤ è´¡çŒ®

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

CI æµç¨‹ä¼šè‡ªåŠ¨è¿è¡Œæ‰€æœ‰æ£€æŸ¥ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œå®‰å…¨æ€§ã€‚

## ğŸ“š å‚è€ƒ

æœ¬ CI/CD é…ç½®åŸºäºä»¥ä¸‹æœ€ä½³å®è·µï¼š

- Spring Boot åº”ç”¨çš„ CI/CD æ¨¡å¼
- GitHub Actions å®˜æ–¹æ–‡æ¡£
- OWASP å®‰å…¨æŒ‡å—
- Java é¡¹ç›®çš„ä»£ç è´¨é‡æ ‡å‡†

---

_æ­¤é…ç½®å‚è€ƒäº† `lang-memory` é¡¹ç›®çš„ CI/CD è®¾ç½®ï¼Œå¹¶é’ˆå¯¹ AstraLint é¡¹ç›®è¿›è¡Œäº†ä¼˜åŒ–ã€‚_
